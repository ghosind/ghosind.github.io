---
layout: post
title: UNP v1 第二章：传输层：TCP、UDP和SCTP
date: 2015-10-04
categories: [UNIX Networking Programming]
tags: [unpv1]
excerpt: UNIX网络编程卷一：套接字联网API笔记，第二章《传输层：TCP、UDP和SCTP》，初步介绍传输层的TCP、UDP和SCTP三种协议。
---

# 2.1 概述
绝大多数的C/S程序使用TCP或UDP，而SCTP是一个最初被设计用于传输电话信令的新协议。UDP是一个简单的、不可靠的数据报协议，TCP是一个复杂、可靠的字节流协议，SCTP除了是一个可靠的传输协议外，还提供了消息边界、传输级别多宿支持以及减少头端阻塞。   

# 2.2 UDP
UDP是一个简单的传输层协议，UDP不保证数据报会到达其最终目的地，不保证跨网络后数据报的先后顺序不变，也不保证每个数据报只到达一次。如果一个数据报到达目的地后校验和检测发现有错误，或者在网络传输中丢失，它便不会被投递到UDP套接字，也不会被自动重传。UDP提供的是无连接的服务，客户和服务器之间不存在任何长期的关系。   
UDP数据报有一个长度，这个长度会跟数据一起传输给接收端，而TCP是一个字节流协议，不提供边界记录。   

# 2.3 TCP
TCP提供面向连接、可靠的服务。使用TCP传输信息前，客户和服务器会先建立一个连接，完成后再终止该连接。TCP的传输中发送数据后要求对端返回确认，若没有收到确认则会自动重传并等待更长的时间，直到数次重传后（依赖于具体的实现）才会放弃传输。TCP与UDP相同，都是全双工的，但在需要的情况下可以转换为单工连接。   
TCP含有动态估算往返时间（RTT）的算法，以大致确定等待确认的时间。TCP会给每个字节关联了一个序列号进行排序，例如一个应用写2048字节到TCP套接字，导致TCP分为两个分节，若分节不是按顺序到达，接收端会根据序列号重新排序。除此外，TCP还提供流量控制，它总是告知对端任何时刻一次能接受的字节数量，成为通告窗口。   

# 2.4 SCTP
SCTP提供的服务与UDP和TCP类似。它为通信双方提供关联，提供了如同TCP的可靠性、排序、流量控制、全双工服务。关联与连接的区别为连接只涉及两个地址之间的通信，而关联指两个系统间的一次通信，因为SCTP支持多宿可能涉及不止两个地址。   
与TCP不同的是，SCTP是面向消息的，提供各个记录按顺序递送的服务，同时也如同UDP一样发送每条记录的长度。SCTP流上某个消息的丢失不会阻塞到同一关联上其他消息的投递，而TCP会阻塞直到丢失被修复。   

---

# 待更新

# 2.5 TCP连接的建立和终止

# 2.6 SCTP关联的建立和终止

